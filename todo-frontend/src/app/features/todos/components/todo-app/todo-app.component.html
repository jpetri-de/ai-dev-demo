<section class="todoapp" [class.no-todos]="!(hasTodos$ | async)">
  <!-- Error display -->
  <div *ngIf="error$ | async as error" class="error-banner" 
       style="background: #f44336; color: white; padding: 10px; margin-bottom: 20px;">
    {{ error }}
    <button (click)="clearError()" 
            style="float: right; background: none; border: none; color: white; cursor: pointer;">Ã—</button>
  </div>

  <!-- Header with input -->
  <header class="header">
    <h1>todos</h1>
    <input 
      class="new-todo" 
      placeholder="What needs to be done?" 
      autofocus 
      #newTodoInput
      [disabled]="isCreating"
      (keyup.enter)="onCreateTodo(newTodoInput.value)"
      maxlength="500"
      [attr.aria-label]="'Create new todo. Press Enter to add.'">
  </header>

  <!-- Main section with toggle all and todo list -->
  <section class="main" *ngIf="hasTodos$ | async">
    <app-toggle-all></app-toggle-all>
    
    <app-todo-list 
      [todos]="filteredTodos$ | async" 
      (toggleTodo)="onToggleTodo($event)"
      (deleteTodo)="onDeleteTodo($event)"
      (updateTodo)="onUpdateTodo($event)">
    </app-todo-list>
  </section>

  <!-- Footer with counter, filters, and clear completed -->
  <footer class="footer" *ngIf="hasTodos$ | async">
    <app-todo-counter></app-todo-counter>
    
    <app-todo-filter></app-todo-filter>
    
    <app-clear-completed></app-clear-completed>
  </footer>
</section>

<!-- Simple Filter Status Popup -->
<div class="filter-popup-overlay" *ngIf="showFilterPopup" (click)="hidePopup()">
  <div class="filter-popup-content">
    <div class="filter-popup-message">{{ popupMessage }}</div>
  </div>
</div>